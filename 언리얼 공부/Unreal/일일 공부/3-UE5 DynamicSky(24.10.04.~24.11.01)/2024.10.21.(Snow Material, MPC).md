#### Unreal Engine 5 : 강의 하나로 DynamicSky 시스템 완벽 마스터하기!

##### 76강 : 전체 새로고침
- DA_Snowy 상태가 될 시 구름이 더이상 필요없음. -> Snowy 상태일 시 구름을 끄도록 구현
- Snowy 상태일 때와 Sunny 상태일 때를 구분해서 구현하는 부분이 많으므로 Macro로 새로 구현(GetCurrentWeatherType)
![[Pasted image 20241021202256.png]]
- 기존 Handle Weahter Setting 함수에서 Switch를 썼던 부분을 새로 만든 Macro로 대체
![[Pasted image 20241021202355.png]]
- Cloud 설정을 담당하는 Handle Cloud Settings에서 기존 동작은 Sunny일때, Snowy일때는 구름을 끄는 형식으로 구현
![[Pasted image 20241021202548.png]]
---
- Data Asset에서 설정 변경 시 바로 적용되지 않음 -> Construction Script가 BP에 변화가 있을 시 실행되므로 어떠한 변화가 필요함
- 새로운 변수(FullRefresh)를 만들어서 클릭 시 변화가 적용되도록 구현
![[Pasted image 20241021202812.png]]

##### 78강 : MF_SnowyWeatherBlend
- Snowy 날씨에 눈이 내림으로 인한 Landscape/물체 들과 같이 Object들에 눈이 쌓인 듯한 Blend를 주기 위해 새로운 Material Function 생성
![[Pasted image 20241021213858.png]]
![[Pasted image 20241021213912.png]]
![[Pasted image 20241021213926.png]]
![[Pasted image 20241021213935.png]]
- 이를 Landscape Material 최종값에 연결
![[Pasted image 20241021214001.png]]

##### 79강 : Material Parameter Collection
- Material Parameter Collection : 
	- scalar/Vector 변수의 값들을 저장하는 Asset
	- Material과 Blueprint 사이 공유 가능
	- 기존의 Dynamic_Instance도 가능하나 이의 경우 블루프린트가 머터리얼의 래퍼런스를 얻어야 가능. 이번 지형 머터리얼의 경우 레퍼런스 얻을 방법이 없음.
- Material Parameter Collection 생성
![[Pasted image 20241021221836.png]]
![[Pasted image 20241021221844.png]]
- M_AutoLandscape에 해당 Snowing 변수를 사용하여 If문에 따라 비활성화시 Alpha값에 0을 넣어 눈이 없도록 생성
![[Pasted image 20241021221957.png]]
- BP_DynamicSky에도 해당 변수의 값을 변경하는 Macro 생성(Toggle Snow)
![[Pasted image 20241021222334.png]]
- 해당 Macro를 HandleWeatherSettings에서 날씨에 따라 변경하도록 배치
![[Pasted image 20241021222425.png]]

##### 80강 : 섹션 챌린지:눈 객체 블랜드
- 객체에 SnowBlend를 추가하고 싶으면 해당 Actor의 Material로 들어가서 출력 핀을 다음과 같이 변경
![[Pasted image 20241021224618.png]]
- 이후 해당 Material로 Instance 생성 후 변수값 변경하며 세부 조정
- 단, 수풀같은 Opacity Mask를 사용하는 Material의 경우 반투명을 고려해야함. -> MF_SnowyWeatherBlend에서 해당 Opacity Mask값을 처리하는 과정 추가
![[Pasted image 20241021224727.png]]
![[Pasted image 20241021224740.png]]

