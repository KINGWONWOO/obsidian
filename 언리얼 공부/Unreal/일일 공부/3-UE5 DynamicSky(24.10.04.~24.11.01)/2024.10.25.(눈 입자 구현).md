#### Unreal Engine 5 : 강의 하나로 DynamicSky 시스템 완벽 마스터하기!

##### 86강 : 풋프린트 나이아가라 시스템
- 발자국에 사용할 Footprint Decal 생성. 이를 통해, MI_LeftFoot, MI_RightFoot을 생성
- 이때, Particle Color가 아닌 Decal Color를 사용함에 주의
![[Pasted image 20241025191854.png]]
![[Pasted image 20241025192131.png]]
- 해당 Decal Material들을 사용하는 Niagara System 생성
- SimpleSpriteBurst 베이스 변경사항
	- Renderer를 Decal Renderer로 변경(Material 설정)
	- Initialize Particle에서 lifetime을 6, Color를 검정으로 설정
	- Scale Color에서 FadeOut 그래프의 시작을 0.5로 설정
	- Decal이 자연스럽게 캐릭터 회전에 맞춰 정렬되도록 Initial Decal Orientation 추가(방향 모드 POrient to Vector -> System)
	- Preview에 안보일 시 Preview Scene Setting에서 Environment->Show Floor 활성화(메뉴 탭 안보일 시 왼쪽 위 Window에서 추가)
	- 추가로, 크기 변경 필요 시 : 원래 Sprite Renderer의 경우엔 Initialize Partice의 Uniform Sprite Size에서 크기 변경 가능.
	- 하지만 Decal이므로 다른 방법 사용 : Decal Renderer 클릭 후 Decal Size Binding에 어떤 변수가 연결되어있는 지 확인, Particle Spawn에서 Set Parameter 추가(Set new or existing parameter directly라 보일 거임)  -> add 누르고 Decal Size 선택(Binding되어 있는 값), 값 변경
![[Pasted image 20241025222517.png]]
![[Pasted image 20241025222532.png]]
- 이제 AnimNotify인 AN_SpawnFootprints에서 해당 Niagara System 생성 구현
	- Spawn System at Location 으로 Niagara system 생성
	- 생성 시스템 왼/오 구분 위해 Select 사용, Boolean 연결에는 사용한 Bone이름을 가져온 후 String 변환, Contatin 함수를 통해 'l'이 포함되어 있는지 확인으로 구별
	- 생성 Location의 경우 Hit Result를 Local Variable로 바꾼 후 Break hit Result를 통해 필요한 변수(Location)만 가져와 연결
	- Roation의 경우 사용자의 방향과 일치시켜야 하므로 Get Mesh Comp -> Get Owner -> Get Actor Rotation으로 구현
	- 이때, Snowy의 경우에만 구현되어야 하므로 Macro Libarar에서 Get Current Weather Type을 추가로 구현
![[Pasted image 20241025223928.png]]
![[Pasted image 20241025224303.png]]

##### 88강 : 날씨 입자 준비
- Snow Particle 생성에 필요한 3가지
	- Snow Emitter
	- Smoke Emitter
	- Performance(중요!)
- 모든 Landscape에 Particle을 뿌릴 수 없으므로 생성 반경을 제어(해당 영상에서는 Spawn Shape을 원기둥으로 생성)
- Spawn Shape
![[Pasted image 20241025225122.png]]
- Spawn Shape 구현에 있어서 우리가 알아야 할 Camera Properties
	- Camera World Position
	- Camera Forward Vector
	- Camera Up Vector
	- Camera Moving Speed
- 이 모든 것을 계산하기 위해 사용자 정의 Niagara Module 생성 예정
##### 89강 : NMS_GetCameraProperties
- FollowCameraTemplate 이름의 Niagara System 생성
![[Pasted image 20241025231602.png]]
- 내부에서 Local Module인 NMS_GetCameraProperties 생성 및 구현
	- Get Camera Properties를 이용해서 Camera 값들 가져와 Map Set으로 변수 저장
	![[Pasted image 20241025231711.png]]
	- Dynamic Spawn Radius를 계산. 현재 Camera 위치에서 이전 Camera 위치를 뺀 값(이동거리) / DeltaTime을 통해 속도 계산, 속도가 낮을 경우 DefaultSpawnRadius 사용  
	![[Pasted image 20241025231747.png]]
	- Spawn Origin을 Vector 연산을 통해 계산 
	![[Pasted image 20241025232028.png]]
- 완성된 Module의 모습
![[Pasted image 20241025232120.png]]
- 이제 생성한 FollowCameraTemplate를 Parent로 새로운 Niagara System 생성 가능

##### 90강 : 눈 입자
- FollowCameraTemplate를 parent로 NS_SnowStorm 생성
- Add Emitter를 통해 Blowing Particle 생성
![[Pasted image 20241026001454.png]]
- 세부 속성 조정
	- Emitter Scale에서 Loop Behavior/Loop Duration 조정
	- Spawn Rate에서 SpawnRate 조정
	- Initialize Particle에서 LifeTime 속성/Color Mode(컬러, 투명도) 조정, 이때 New Dynamic Scratch Input으로 입력값에 대한 함수 생성 가능
	![[Pasted image 20241026001817.png]]
	![[Pasted image 20241026001824.png]]
	- Shape Location으로 생성 반경 조정 가능, 이때 NS_SnowMan에서 정의한 변수를 대입 가능
	![[Pasted image 20241026001919.png]]
	![[Pasted image 20241026001930.png]]
	- Gravity Force로 내려오는 속도 조정 가능
	- Wind Force에서 풍속 조정 가능
- 특정 각도를 볼 때만 눈 입자가 보이는 현상 '클리핑 현상' 발생 : Fixed Bound을 크게 설정
![[Pasted image 20241026002303.png]]